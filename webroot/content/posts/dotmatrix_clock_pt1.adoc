= めっちゃかっこいいSNTP時計を作りたい！！ #1

:date: 2020-12-31 23:00
:slug: dotmatrix_clock_pt1
:tags: technical, hardware, baremetal, raspberrypi
:category: 技術系
:summary: 製作中の時計の話の第1話です

前の週から研究の合間にLEDドットマトリックスとOLEDディスプレイで現在時刻と室温
などを表示してくれる時計を作っています。年末年始に結構色々用事が入ってしまって
しばらく進められそうにないので途中経過のメモとして実装したい機能ややったことを
書こうと思います。

== 実装したい機能
実装したい機能は以下のとおりです。

* SNTP経由でローカルタイムを取得して現在時刻として出す
* 環境センサ(BME280)で室温、湿度、気圧を取得して表示する
* 気体センサ(CCS811)で実質CO~2~濃度（周辺の空気がどれぐらいきれいか）を計測し
  て表示する
* 何かしらのサービスから直近の気象予報を取得し表示する
* 時刻の表示はLEDドットマトリクス、その他情報はOLEDディスプレイに表示する

== 進捗
ドットマトリクスの駆動部分はロジックレベルを5VにしたほうがLEDの駆動が楽なのと
ダイナミック点灯の処理をメインの部分（Raspberry Pi Zero Wを使うつもり）以外で
やりたいので8bit PIC(PIC18F25Q10)でディスプレイ部分を動かすことにしました。下の写真はまずブレッドボー
ドで2桁分だけ仮組みしてプログラムの動作確認を行った様子です。

image::{static}/images/{slug}/display_prototype.png[]

ユニバーサル基板への実装も始めていますが時間がなくなってしまったので途中でストッ
プしています。

== 今後
ディスプレイ部分のはんだ付けが終わったらメイン部分との通信やその他の機能を実装
した後にRaspberry Piを中心にしてメイン部分の実装を勧めていきたいと思います。
（2月以降の話になってしまいそうですが...）
